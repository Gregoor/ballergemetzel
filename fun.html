<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <script src="src/libs/kinetic.js"></script>
    <script defer="defer">
      var stage = new Kinetic.Stage({
        container: 'container',
        width: window.innerWidth-50,
        height: window.innerHeight-50
      });

      var layer = new Kinetic.Layer();

      var rect1 = new Kinetic.Rect({
        x: 0,
        y: 0,
        width: window.innerWidth-50,
        height: window.innerHeight-50,
        fill: 'green',
        stroke: 'black',
        strokeWidth: 0
      });

      var rect2 = new Kinetic.Rect({
        x: 0,
        y: (window.innerHeight-50)*(2/3),
        width: window.innerWidth-50,
        height: (window.innerHeight-50)/3,
        fill: 'brown',
        stroke: 'black',
        strokeWidth: 1
      });

      var circle = new Kinetic.Circle({
        x: 100,
        y: 420,
        radius: 70,
        fill: 'red',
        stroke: 'black',
        strokeWidth: 4
      });

     /* var shadow = new Kinetic.Ellipse({
        x: 100,
        y: 420,
        radius:{
        	x: 35,
        	y: 70
        },
        fill: 'black',
        stroke: 'black',
        strokeWidth: 4
      });
*/
      // add the shape to the layer
      layer.add(rect1);
      layer.add(rect2);
      layer.add(circle);
     // layer.add(shadow);

      // add the layer to the stage
      stage.add(layer);


      var left = 0;
      var up = 0;
      var down = 0;
      var interval;
      var end = 200;
      var startx = 100;
      var starty = (window.innerHeight-50)*(2/3) + 20;
  
      interval = setInterval(animation, 5);

      function animation() {
      	circleJump();
      }

      function circleJump() {
      	circle.destroy();
      	up = -(left - (end/2))*(left - (end/2))/(end/2) + (end/2); //math-magic <3
      	if (up < 0)
      		up = 0;
      	//DEBUG: console.log("up = " + up + "\nleft = " + left + "\n");
     	circle = new Kinetic.Circle({
	        x: startx + left,
	        y: starty - up,
	        radius: 70,
	        fill: 'red',
	        stroke: 'black',
	        strokeWidth: 4
      	});
     	layer.add(circle);
      	stage.add(layer);
      	left++;
      	if (left > end) {
      		startx += left;
      		left = 0;
      	}
      }
    </script>
  </body>
</html>